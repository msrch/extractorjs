/*!
 * extractorjs v0.0.1 - Extract common information from a string.
 * (c) 2014 Michal Srch
 */
!function(a,b,c){"function"==typeof define?define(c):"undefined"!=typeof module?module.exports=c():b[a]=c()}("Extractor",this,function(){function a(a,b){var c,d,f,g=e.isUndefined(a)||""===a?!1:a,j=e.isPlainObject(b)?b:{},k={};if(g){c=e.defaults(j,i);for(f in h)h.hasOwnProperty(f)&&(d=!0,c.filter.length&&!~c.filter.indexOf(f)&&(d=!1),c.without.length&&~c.without.indexOf(f)&&(d=!1),d&&(k[f]=h[f](g,c.duplicates)));return k}return e.clone(h)}function b(a){return function(b,c){var d=e.isUndefined(c)?i.duplicates:!!c,f=(b+"").match(a.regexp)||[];return a.trim&&(f=f.map(e.trim)),e.isFunction(a.postProcessor)&&(f=f.map(a.postProcessor)),d||(f=e.unique(f)),f}}function c(a){var c,d;if(e.isPlainObject(a)){if(c=e.defaults(a,j),c.name&&/^[a-zA-Z]+$/.test(c.name)){if(e.isUndefined(h[c.name])){if(e.isRegExp(c.regexp)){if(e.isBoolean(c.trim)){if(c.postProcessor&&!e.isFunction(c.postProcessor))throw new Error("Extractor: If post-processor set it has to be type of function!");return d=c.name+"",h[d]=b(c),h[d]}throw new Error("Extractor: Trim has to be a boolean value!")}throw new Error("Extractor: Not type of RegExp!")}throw new Error('Extractor: Pattern with "'+c.name+'" name already exists!')}throw new Error("Extractor: Invalid pattern name! Accepts only lowercase and uppercase letters.")}throw new Error("Extractor: Add new pattern by passing config object!")}function d(a){return function(b,c){var d=e.isUndefined(b)?560:b,f=e.isUndefined(c)?315:c;return'<iframe width="'+d+'" height="'+f+'" src="//www.youtube.com/embed/'+a+'" frameborder="0" allowfullscreen></iframe>'}}var e={},f=this,g=f.Extractor,h={},i={filter:[],without:[],duplicates:!0},j={name:null,regexp:null,trim:!0,postProcessor:null};return e.clone=function(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c},e.defaults=function(a,b){var c,d=e.clone(a);for(c in b)b.hasOwnProperty(c)&&e.isUndefined(d[c])&&(d[c]=b[c]);return d},e.isBoolean=function(a){return a===!0||a===!1||a&&"[object Boolean]"===e.protoToString(a)||!1},e.isFunction=function(a){return"function"==typeof a},e.isPlainObject=function(a){return a&&"[object Object]"===e.protoToString(a)||!1},e.isRegExp=function(a){return a&&"[object RegExp]"===e.protoToString(a)||!1},e.protoToString=function(a){return Object.prototype.toString.call(a)},e.isUndefined=function(a){return"undefined"==typeof a},e.trim=function(a){return(""+a).replace(/^\s+|\s+$/g,"")},e.trimFirst=function(a){return(""+a).slice(1)},e.unique=function(a){return a.reduce(function(a,b){return~a.indexOf(b)||a.push(b),a},[])},c({name:"dates",regexp:function(){var a="(?:january|jan\\.?|february|feb\\.?|march|mar\\.?|april|apr\\.?|may|june|jun\\.?|july|jul\\.?|august|aug\\.?|september|sep\\.?|october|oct\\.?|november|nov\\.?|december|dec\\.?)",b="[0-3]?\\d(?:st|nd|rd|th)?",c="\\d{2,4}",d="[0-3]?\\d[-/][0-3]?\\d[-/]"+c,e=b+"\\s+(?:of\\s+)?"+a,f=a+"\\s+"+b,g="(?:\\,)?\\s*(?:"+c+")?";return new RegExp("(?:"+e+"|"+f+")"+g+"|"+d,"gim")}()}),c({name:"emails",regexp:/([a-z0-9!#$%&\.'*+\/=?^_`{|}~-]+@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)/gim}),c({name:"hashtags",regexp:/\B#([^#\s]+?)(?=[\s\.,:\?!]|$)/gim,postProcessor:e.trimFirst}),c({name:"links",regexp:/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gim}),c({name:"mentions",regexp:/\B@([^@\s]+?)(?=[\s\.,:\?!]|$)/gim,postProcessor:e.trimFirst}),c({name:"phones",regexp:/((?:[+(\s]*\d+\W*)?(?:\(?\d{3}\)?\W*)?\d{3}\W*\d{4})/gim}),c({name:"times",regexp:/\d{1,2}:\d{2}\s?(?:(:|.)\d{2}\s?)?(?:[ap]\.?m\.?)?|\d[ap]\.?m\.?/gim}),c({name:"youtube",regexp:/(?:http|https|)(?::\/\/|)(?:www.|)(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[a-z0-9;:@?&%=+\/\$_.-]*/gim,postProcessor:function(a){var b="http://img.youtube.com/vi/",c=a.match(/(?:v=|\.be\/|\/embed\/){1}([\w\-]{11}){1}/i),f=c&&!e.isUndefined(c[1])?c[1]:"";return{embed:d(f),id:f,link:a,thumb:b+f+"/default.jpg",thumbHQ:b+f+"/hqdefault.jpg"}}}),a.addPattern=c,a.noConflict=function(){return f.Extractor=g,this},a.VERSION="0.0.1",a});